---
version: 2
interactions:
    - id: 0
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/personal_access_tokens/self
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"id":10926727,"name":"vault-plugin-test-token","revoked":false,"created_at":"2024-10-12T07:11:02.977Z","scopes":["api","read_api","read_user","create_runner","manage_runner","k8s_proxy","read_repository","write_repository","read_registry","write_registry","ai_features"],"user_id":32923,"last_used_at":"2024-10-12T07:12:00.639Z","active":true,"expires_at":"2024-11-11"}'
        headers:
            Cache-Control:
                - max-age=0, private, must-revalidate
            Cf-Cache-Status:
                - MISS
            Cf-Ray:
                - 8d15477379e51e9d-AMS
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Sat, 12 Oct 2024 07:12:00 GMT
            Etag:
                - W/"eb8c6a58e7ef9a81455d40394cc921c0"
            Gitlab-Lb:
                - haproxy-main-47-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-d
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=QwHC6%2BGYltSi32LYuov%2FPCQBqfhW4S4CtOe%2Bfgesbqk%2FMVjhWm39TBL2YEdc1X26a2ZAzdmu09McaeKtWbjJTHqCZc8u%2B%2BmK0O0kTlzWz%2Fl2YHa7qPFd5ERLpYs%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=pps4bgezwihp4YSkJ1i31CEuwqAOlR3JsVBLZBV92Qc-1728717120727-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin, Accept-Encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Gitlab-Meta:
                - '{"correlation_id":"d9f31ea160d5a3b1437c1ed361036332","version":"1"}'
            X-Request-Id:
                - d9f31ea160d5a3b1437c1ed361036332
            X-Runtime:
                - "0.034907"
        status: 200 OK
        code: 200
        duration: 246.743792ms
    - id: 1
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/personal_access_tokens/self
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"id":10926727,"name":"vault-plugin-test-token","revoked":false,"created_at":"2024-10-12T07:11:02.977Z","scopes":["api","read_api","read_user","create_runner","manage_runner","k8s_proxy","read_repository","write_repository","read_registry","write_registry","ai_features"],"user_id":32923,"last_used_at":"2024-10-12T07:12:00.639Z","active":true,"expires_at":"2024-11-11"}'
        headers:
            Cache-Control:
                - max-age=0, private, must-revalidate
            Cf-Cache-Status:
                - MISS
            Cf-Ray:
                - 8d1547763b7a1e9d-AMS
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Sat, 12 Oct 2024 07:12:01 GMT
            Etag:
                - W/"eb8c6a58e7ef9a81455d40394cc921c0"
            Gitlab-Lb:
                - haproxy-main-50-lb-gprd
            Gitlab-Sv:
                - gke-cny-api
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=5xjXLYIMD%2FnsXioaH5biNyn9S%2FOaANmsSAnbo%2FZnr1%2F9alVCTaXvj1qKOFV1Y3tnt%2BHLhZMjnxT8UqEefm8r3B4u9H8cvEud0j3itXFYNy7n0JXsM3mOAY3K5uI%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=y00OhfNJsPq_nK80esK8keTOe9voQEp5sIurFuxzMDw-1728717121151-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin, Accept-Encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Gitlab-Meta:
                - '{"correlation_id":"15633d6b4e57e547a32bc534ceb06607","version":"1"}'
            X-Request-Id:
                - 15633d6b4e57e547a32bc534ceb06607
            X-Runtime:
                - "0.026121"
        status: 200 OK
        code: 200
        duration: 177.210708ms
    - id: 2
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/users/32923
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"id":32923,"username":"ilijamt","name":"Ilija Matoski","state":"active","locked":false,"avatar_url":"https://secure.gravatar.com/avatar/e1bd6bdeae5b3bcd803934a067f39933dd21f9da7974c8e3623ee21ece5fea61?s=80\u0026d=identicon","web_url":"https://gitlab.com/ilijamt","created_at":"2014-05-19T14:51:54.441Z","bio":"","location":"","public_email":"","skype":"","linkedin":"","twitter":"","discord":"","website_url":"","organization":"","job_title":"","pronouns":null,"bot":false,"work_information":null,"local_time":"7:12 AM"}'
        headers:
            Cache-Control:
                - max-age=0, private, must-revalidate
            Cf-Cache-Status:
                - MISS
            Cf-Ray:
                - 8d1547786c661e9d-AMS
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Sat, 12 Oct 2024 07:12:01 GMT
            Etag:
                - W/"6be37df22a2eca9ad06347f5e193f804"
            Gitlab-Lb:
                - haproxy-main-54-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-b
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=nqNLGU098cNhDE%2FiYNzVCt4hxBSfIkUD72bdx1MHvzLeJHVHIpw4DQwoFPkoFcUaRZWRQyFVvCCOJvKhiP90DiLYQUl46kTyldC%2FmDGciZqJtLE1WGEsrt76B4k%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=V_4IV2SZQNSF8n4tb85_gISISbsoKQ2ajNVAgGjsjSI-1728717121547-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin, Accept-Encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Gitlab-Meta:
                - '{"correlation_id":"876d805e1a60a6e6fbb3ecc18db599e7","version":"1"}'
            X-Request-Id:
                - 876d805e1a60a6e6fbb3ecc18db599e7
            X-Runtime:
                - "0.069151"
        status: 200 OK
        code: 200
        duration: 213.577417ms
    - id: 3
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 27
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: '{"expires_at":"2024-11-12"}'
        form: {}
        headers:
            Accept:
                - application/json
            Content-Type:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/personal_access_tokens/10926727/rotate
        method: POST
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"id":10926736,"name":"vault-plugin-test-token","revoked":false,"created_at":"2024-10-12T07:12:01.911Z","scopes":["api","read_api","read_user","create_runner","manage_runner","k8s_proxy","read_repository","write_repository","read_registry","write_registry","ai_features"],"user_id":32923,"last_used_at":null,"active":true,"expires_at":"2024-11-12","token":"glpat-nsMtXz-LoSz8ib4MznxH"}'
        headers:
            Cache-Control:
                - max-age=0, private, must-revalidate
            Cf-Cache-Status:
                - DYNAMIC
            Cf-Ray:
                - 8d15477b1ddf1e9d-AMS
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Sat, 12 Oct 2024 07:12:01 GMT
            Etag:
                - W/"5eeae513145d150baf0cd54bcc1bd6b4"
            Gitlab-Lb:
                - haproxy-main-38-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-d
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=2eRkbx6QQMSpElFGuVqxmXWwgumech4hZL5QID34wgPn%2FbFqbZVjuvc7Xp%2F3LOBCnUFH4%2Brp9G7Zt%2B9h4d8I%2FmfSlOlJrH4B%2BV4sLhJK%2B7UEsEIBD1FTckO0VuY%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=ivD7yco6cZcE.EGCu.9Jt.jnFaLF1h_fl6eoVxpFTfk-1728717121978-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Gitlab-Meta:
                - '{"correlation_id":"70b685b07efe479e22cd7fe28cf0c1f3","version":"1"}'
            X-Request-Id:
                - 70b685b07efe479e22cd7fe28cf0c1f3
            X-Runtime:
                - "0.074974"
        status: 200 OK
        code: 200
        duration: 312.304167ms
    - id: 4
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/personal_access_tokens/self
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 106
        uncompressed: false
        body: '{"error":"invalid_token","error_description":"Token was revoked. You have to re-authorize from the user."}'
        headers:
            Cache-Control:
                - no-cache
            Cf-Cache-Status:
                - MISS
            Cf-Ray:
                - 8d15477f0ff21e9d-AMS
            Content-Length:
                - "106"
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Sat, 12 Oct 2024 07:12:02 GMT
            Gitlab-Lb:
                - haproxy-main-22-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-c
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=n%2BJPY1qsMeUIr9kcb4Kouox3f1Z%2BH%2FFlfb5htBPGIUAKSyNAmm7ueeF0qxYsbf7ZpFxKEsaWIaCfjFXgW3CnEoNS%2BsDhy2jMZFLCBtPxlADzfcCQZhdC1Xz%2FsD0%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=4HBEOLX3hywL2WBLYcnArTHE8F9eAC4VBoSB4y938dA-1728717122561-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin, Accept-Encoding
            Www-Authenticate:
                - Bearer realm="Protected by OAuth 2.0", error="invalid_token", error_description="Token was revoked. You have to re-authorize from the user."
            X-Content-Type-Options:
                - nosniff
            X-Gitlab-Meta:
                - '{"correlation_id":"36989736767ccf36f9e086e7cf2a65a2","version":"1"}'
            X-Request-Id:
                - 36989736767ccf36f9e086e7cf2a65a2
            X-Runtime:
                - "0.022621"
        status: 401 Unauthorized
        code: 401
        duration: 170.916583ms
    - id: 5
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/personal_access_tokens/self
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"id":10926736,"name":"vault-plugin-test-token","revoked":false,"created_at":"2024-10-12T07:12:01.911Z","scopes":["api","read_api","read_user","create_runner","manage_runner","k8s_proxy","read_repository","write_repository","read_registry","write_registry","ai_features"],"user_id":32923,"last_used_at":"2024-10-12T07:12:02.826Z","active":true,"expires_at":"2024-11-12"}'
        headers:
            Cache-Control:
                - max-age=0, private, must-revalidate
            Cf-Cache-Status:
                - MISS
            Cf-Ray:
                - 8d15478128da1e9d-AMS
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Sat, 12 Oct 2024 07:12:02 GMT
            Etag:
                - W/"d13226ad8c7d864b97d95937b0bf4611"
            Gitlab-Lb:
                - haproxy-main-47-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-d
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=tT9kCcJjesQcb42wGjvYCybpQMn6mA3TqY8pFYzK7VsrQIdpYxwop8V3e1VxBQrqNnvX6ydvtsV9qnTTSxc%2Bgg1M%2F4JBzZRsxAnRgJ5iX%2F9NsHWE02L2bsHObA8%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=7b2mxUIJsK7r6yeW_Yyms1m3c.yU4TPg0FaPJGuEzHw-1728717122945-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin, Accept-Encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Gitlab-Meta:
                - '{"correlation_id":"7093da2c7f24e5300693c6432453c083","version":"1"}'
            X-Request-Id:
                - 7093da2c7f24e5300693c6432453c083
            X-Runtime:
                - "0.064506"
        status: 200 OK
        code: 200
        duration: 210.568084ms
