---
version: 2
interactions:
    - id: 0
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/personal_access_tokens/self
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"id":10918303,"name":"vault-plugin-test-token","revoked":false,"created_at":"2024-10-11T09:24:02.260Z","scopes":["api","read_api","read_user","create_runner","manage_runner","k8s_proxy","read_repository","write_repository","read_registry","write_registry","ai_features"],"user_id":32923,"last_used_at":"2024-10-11T09:25:17.333Z","active":true,"expires_at":"2025-10-11"}'
        headers:
            Cache-Control:
                - max-age=0, private, must-revalidate
            Cf-Cache-Status:
                - MISS
            Cf-Ray:
                - 8d0dcd4eab8441ce-AMS
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Fri, 11 Oct 2024 09:25:17 GMT
            Etag:
                - W/"9a96616cac5f4bc9ff6e8be0bfab6069"
            Gitlab-Lb:
                - haproxy-main-44-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-d
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=vVYvV2ZiNm4ioBdl4pLRK%2BSE4%2BNtJ5RldvAGRa1a%2FMXeafpHvslzTt52HRgrNfcT5B%2FP37%2FQGwJwMZYY4i5xtSH3AdnSpFOCtB%2FQsL3JXPk%2Fh5yGbdllxgZEDBY%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=snbnEqd4._3U_2WaTtgT1xe5ClsyVF_Tka3s1p05_mk-1728638717419-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin, Accept-Encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Gitlab-Meta:
                - '{"correlation_id":"53e54ff893745800523d3a20770a3ba5","version":"1"}'
            X-Request-Id:
                - 53e54ff893745800523d3a20770a3ba5
            X-Runtime:
                - "0.031657"
        status: 200 OK
        code: 200
        duration: 246.249625ms
    - id: 1
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/personal_access_tokens/self
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"id":10918303,"name":"vault-plugin-test-token","revoked":false,"created_at":"2024-10-11T09:24:02.260Z","scopes":["api","read_api","read_user","create_runner","manage_runner","k8s_proxy","read_repository","write_repository","read_registry","write_registry","ai_features"],"user_id":32923,"last_used_at":"2024-10-11T09:25:17.333Z","active":true,"expires_at":"2025-10-11"}'
        headers:
            Cache-Control:
                - max-age=0, private, must-revalidate
            Cf-Cache-Status:
                - MISS
            Cf-Ray:
                - 8d0dcd518e2841ce-AMS
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Fri, 11 Oct 2024 09:25:17 GMT
            Etag:
                - W/"9a96616cac5f4bc9ff6e8be0bfab6069"
            Gitlab-Lb:
                - haproxy-main-06-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-b
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=YPNZnw9bK%2FpBJ0muTIfX%2BcDGYytxCRSYLHw87w48dEIg%2FTj6pfjI%2B8byDIUXCcfh5QGmWmKi3AwBvx2aNvnd4PALbHyUkBWpL%2FqpMsHIYB2SCcWKsqPXfjDEmZ4%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=O1Jr7vSqHp3uN3y3gRrQgv7oD8TPVxf3m2FKB5oqyeM-1728638717843-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin, Accept-Encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Gitlab-Meta:
                - '{"correlation_id":"a0c28b326e07423cb3ad1c036e1e4b52","version":"1"}'
            X-Request-Id:
                - a0c28b326e07423cb3ad1c036e1e4b52
            X-Runtime:
                - "0.030970"
        status: 200 OK
        code: 200
        duration: 174.888708ms
    - id: 2
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/users/32923
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"id":32923,"username":"ilijamt","name":"Ilija Matoski","state":"active","locked":false,"avatar_url":"https://secure.gravatar.com/avatar/e1bd6bdeae5b3bcd803934a067f39933dd21f9da7974c8e3623ee21ece5fea61?s=80\u0026d=identicon","web_url":"https://gitlab.com/ilijamt","created_at":"2014-05-19T14:51:54.441Z","bio":"","location":"","public_email":"","skype":"","linkedin":"","twitter":"","discord":"","website_url":"","organization":"","job_title":"","pronouns":null,"bot":false,"work_information":null,"local_time":"9:25 AM"}'
        headers:
            Cache-Control:
                - max-age=0, private, must-revalidate
            Cf-Cache-Status:
                - MISS
            Cf-Ray:
                - 8d0dcd53b80241ce-AMS
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Fri, 11 Oct 2024 09:25:18 GMT
            Etag:
                - W/"42f2d9fcab5391421f767ea9fe544269"
            Gitlab-Lb:
                - haproxy-main-42-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-b
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=YlsNM1nVbGBtHT3wAgraHq1V3VBZ0Rs4YFV%2FfrP663euaQE32bDM8T8%2BW7C4mE7nTFDLf%2FziN%2FHx7%2FL%2FjfZqbX%2BqTu1nh53%2Fm1g5BUM6H86uGvqrpTvTAUj19BM%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=A_i.TjUuAuP3TzmTLLmQ6kUdpdtn3AW_n..tCQddmg0-1728638718207-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin, Accept-Encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Gitlab-Meta:
                - '{"correlation_id":"63d34cd31cc3ee15e6933624ebe071df","version":"1"}'
            X-Request-Id:
                - 63d34cd31cc3ee15e6933624ebe071df
            X-Runtime:
                - "0.038039"
        status: 200 OK
        code: 200
        duration: 187.452208ms
    - id: 3
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 27
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: '{"expires_at":"2025-10-11"}'
        form: {}
        headers:
            Accept:
                - application/json
            Content-Type:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/personal_access_tokens/10918303/rotate
        method: POST
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"id":10918315,"name":"vault-plugin-test-token","revoked":false,"created_at":"2024-10-11T09:25:18.521Z","scopes":["api","read_api","read_user","create_runner","manage_runner","k8s_proxy","read_repository","write_repository","read_registry","write_registry","ai_features"],"user_id":32923,"last_used_at":null,"active":true,"expires_at":"2025-10-11","token":"glpat-8oyQTsAazgWtCG6Ezf43"}'
        headers:
            Cache-Control:
                - max-age=0, private, must-revalidate
            Cf-Cache-Status:
                - DYNAMIC
            Cf-Ray:
                - 8d0dcd56095841ce-AMS
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Fri, 11 Oct 2024 09:25:18 GMT
            Etag:
                - W/"e4d6cf52e74bbfe1a98543e4b91921e6"
            Gitlab-Lb:
                - haproxy-main-33-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-b
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=My%2BO4cTmQCVruB764mp4FgHRndQZ9fOPWOs%2Bte7yxkrHvGvP3uyVU0xm%2BXGpeu0D0hW9UhfPYNbNcuPUOnpvmH1yEcqAw6sZFubOlRn71tlgPGnU2yBYFEHsPU8%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=BXHspUWKhDk32H5mOR7DdouGHvTk6KzFB.AqWO7d9I8-1728638718584-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Gitlab-Meta:
                - '{"correlation_id":"db13311710a0b8d8d5638ff216cebaff","version":"1"}'
            X-Request-Id:
                - db13311710a0b8d8d5638ff216cebaff
            X-Runtime:
                - "0.064630"
        status: 200 OK
        code: 200
        duration: 187.697208ms
    - id: 4
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/personal_access_tokens/self
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 106
        uncompressed: false
        body: '{"error":"invalid_token","error_description":"Token was revoked. You have to re-authorize from the user."}'
        headers:
            Cache-Control:
                - no-cache
            Cf-Cache-Status:
                - MISS
            Cf-Ray:
                - 8d0dcd586b0241ce-AMS
            Content-Length:
                - "106"
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Fri, 11 Oct 2024 09:25:18 GMT
            Gitlab-Lb:
                - haproxy-main-10-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-c
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=vvdnqMlxqh0tJd%2BjUsqgkEhNZfmhFX3d08c1ss%2BIsXV5hEvcAwMjx4wsuzR%2BBTYocTINUeWvt8INR%2B3D4OFkPM%2F%2BJpehuZbYv9tS8So%2BDFF5Kgo6iXMkueIYnl0%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=BSdZYot.dRoZc4RL843MUwofyYu1ARLrzVrU8M1VSk8-1728638718947-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin, Accept-Encoding
            Www-Authenticate:
                - Bearer realm="Protected by OAuth 2.0", error="invalid_token", error_description="Token was revoked. You have to re-authorize from the user."
            X-Content-Type-Options:
                - nosniff
            X-Gitlab-Meta:
                - '{"correlation_id":"8f5c0e5f741900298dd49060fd05acaa","version":"1"}'
            X-Request-Id:
                - 8f5c0e5f741900298dd49060fd05acaa
            X-Runtime:
                - "0.024963"
        status: 401 Unauthorized
        code: 401
        duration: 172.017208ms
    - id: 5
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/personal_access_tokens/self
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"id":10918315,"name":"vault-plugin-test-token","revoked":false,"created_at":"2024-10-11T09:25:18.521Z","scopes":["api","read_api","read_user","create_runner","manage_runner","k8s_proxy","read_repository","write_repository","read_registry","write_registry","ai_features"],"user_id":32923,"last_used_at":"2024-10-11T09:25:19.209Z","active":true,"expires_at":"2025-10-11"}'
        headers:
            Cache-Control:
                - max-age=0, private, must-revalidate
            Cf-Cache-Status:
                - MISS
            Cf-Ray:
                - 8d0dcd5a9cba41ce-AMS
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Fri, 11 Oct 2024 09:25:19 GMT
            Etag:
                - W/"676536deed6726fb2c216d558ec8ac54"
            Gitlab-Lb:
                - haproxy-main-37-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-c
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=hLGH3HgYrqBgd6sUykZyMZh7yz4htfeRrPQLZOqHdEjLT8hfInqQOCWJLF9U5xjscsWis49fhohR%2BefAD%2FwAYbnUjZt49UE0mBtVLKVJqkhpbCsVi1T9zhE6Ye4%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=UiKJV42NEd9BdLtKGMYfXHifkaMyplbslasIXdl0My4-1728638719343-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin, Accept-Encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Gitlab-Meta:
                - '{"correlation_id":"57a26ee867c681d25025c2f8ddaa07c3","version":"1"}'
            X-Request-Id:
                - 57a26ee867c681d25025c2f8ddaa07c3
            X-Runtime:
                - "0.082367"
        status: 200 OK
        code: 200
        duration: 223.568792ms
