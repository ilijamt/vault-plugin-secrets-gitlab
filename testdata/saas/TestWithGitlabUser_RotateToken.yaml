---
version: 2
interactions:
    - id: 0
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/personal_access_tokens/self
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"id":13740081,"name":"TestWithGitlabUser_RotateToken","revoked":false,"created_at":"2025-04-04T20:44:18.754Z","description":"","scopes":["api","self_rotate"],"user_id":32923,"last_used_at":"2025-04-04T20:45:32.989Z","active":true,"expires_at":"2026-04-04"}'
        headers:
            Cache-Control:
                - max-age=0, private, must-revalidate
            Cf-Cache-Status:
                - MISS
            Cf-Ray:
                - 92b3a73e0bc32d00-AMS
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Fri, 04 Apr 2025 20:46:07 GMT
            Etag:
                - W/"fbb79ed65f1b64c6306e6705d21faeac"
            Gitlab-Lb:
                - haproxy-main-55-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-b
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=dRlPoqJ33%2F85zzkaDQJvvyPVXziU1eSkDr0CJezx%2FxEJAHSs4uqZiq1qstMGreYc684A2%2B76%2B9MX%2BdQwJwKFDMFL6uNY7EAEDHxaqXnIxjw3Ipbp8aL8x%2F41YLM%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=Xz4Irm9zRUICH5U9DwFqs.I2bDSCE.EyVR_GFYZ4CmI-1743799567359-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin, Accept-Encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Gitlab-Meta:
                - '{"correlation_id":"105b2489862d93cf1acde7b9d51d8bfe","version":"1"}'
            X-Request-Id:
                - 105b2489862d93cf1acde7b9d51d8bfe
            X-Runtime:
                - "0.156385"
        status: 200 OK
        code: 200
        duration: 374.639042ms
    - id: 1
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/metadata
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"version":"17.11.0-pre","revision":"d221639f6c7","kas":{"enabled":true,"externalUrl":"wss://kas.gitlab.com","externalK8sProxyUrl":"https://kas.gitlab.com/k8s-proxy","version":"17.11.0-rc1+4cbdaf5d1ab9382c53e36fdbd2df26b6e5e6151f"},"enterprise":true}'
        headers:
            Cache-Control:
                - max-age=0, private, must-revalidate
            Cf-Cache-Status:
                - MISS
            Cf-Ray:
                - 92b3a74278142d00-AMS
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Fri, 04 Apr 2025 20:46:07 GMT
            Etag:
                - W/"f3cfa28bf16b6f2b3ee093d1fd2656a2"
            Gitlab-Lb:
                - haproxy-main-40-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-b
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=e4dwT4DarbuXMXn9U%2Bdqal5O5jhVbej4nKLo9iBbzNYMx%2Fo1SmLRf7Swr%2Fo8UxfTUzUyQn5bGkbZiTWxFuyLyta1n%2B8CDuYYLo%2BYlWo6FXnUdkHb9vMYWel4O3A%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=sV.IH0QsOL9q2Fq6HvmVJgvHS8gpz6qFQV_CO90tvss-1743799567963-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin, Accept-Encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Gitlab-Meta:
                - '{"correlation_id":"61fb224b58845ded71a3aca819e9710a","version":"1"}'
            X-Request-Id:
                - 61fb224b58845ded71a3aca819e9710a
            X-Runtime:
                - "0.057072"
        status: 200 OK
        code: 200
        duration: 296.969583ms
    - id: 2
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/personal_access_tokens/self
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"id":13740081,"name":"TestWithGitlabUser_RotateToken","revoked":false,"created_at":"2025-04-04T20:44:18.754Z","description":"","scopes":["api","self_rotate"],"user_id":32923,"last_used_at":"2025-04-04T20:45:32.989Z","active":true,"expires_at":"2026-04-04"}'
        headers:
            Cache-Control:
                - max-age=0, private, must-revalidate
            Cf-Cache-Status:
                - MISS
            Cf-Ray:
                - 92b3a7464c462d00-AMS
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Fri, 04 Apr 2025 20:46:08 GMT
            Etag:
                - W/"fbb79ed65f1b64c6306e6705d21faeac"
            Gitlab-Lb:
                - haproxy-main-04-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-b
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=t9rOLaG4pXaHTMUA2mqx8b2dsmK8cMDCcQDgEHDtlR5rrIhW7bzzGoYatjePJ0PibEXB2nBHA3PBW1p5A5LU1xPIwlB9r4eZMe7AEeUOmZTnMeVSlDd90Nn3fQo%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=3J2rYQjaE3ZpdSzOYA7QbS.CqtOyc5hACzULU8PpF58-1743799568556-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin, Accept-Encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Gitlab-Meta:
                - '{"correlation_id":"d808a8bbc183501bf33b3c4600ea4a63","version":"1"}'
            X-Request-Id:
                - d808a8bbc183501bf33b3c4600ea4a63
            X-Runtime:
                - "0.044768"
        status: 200 OK
        code: 200
        duration: 215.897333ms
    - id: 3
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/users/32923
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"id":32923,"username":"ilijamt","name":"Ilija Matoski","state":"active","locked":false,"avatar_url":"https://secure.gravatar.com/avatar/e1bd6bdeae5b3bcd803934a067f39933dd21f9da7974c8e3623ee21ece5fea61?s=80\u0026d=identicon","web_url":"https://gitlab.com/ilijamt","created_at":"2014-05-19T14:51:54.441Z","bio":"","location":"","public_email":"","skype":"","linkedin":"","twitter":"","discord":"","website_url":"","organization":"","job_title":"","pronouns":null,"bot":false,"work_information":null,"local_time":"8:46 PM"}'
        headers:
            Cache-Control:
                - max-age=0, private, must-revalidate
            Cf-Cache-Status:
                - MISS
            Cf-Ray:
                - 92b3a748feba2d00-AMS
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Fri, 04 Apr 2025 20:46:08 GMT
            Etag:
                - W/"efb66141e0864f738a4e76e73c998cb2"
            Gitlab-Lb:
                - haproxy-main-41-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-c
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=yKF4WJqzIG55Utrd0N9EPz5dHqLPwait%2Fz0PZObfsvTU0jsdoCY4EqLk7YlWuZ3FDUi5a4lSKr2maMfhZcfoIoeGqw6f5OW1WOVkgCbhlOIe%2F5TWQq3CNn5Zqgw%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=HimoPROYlCL7zp76vcNJx1lA87NURvCb0iag8mjSVIU-1743799568998-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin, Accept-Encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Gitlab-Meta:
                - '{"correlation_id":"c52b9b113bacce50d8f531018be57dae","version":"1"}'
            X-Request-Id:
                - c52b9b113bacce50d8f531018be57dae
            X-Runtime:
                - "0.067097"
        status: 200 OK
        code: 200
        duration: 222.983834ms
    - id: 4
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 27
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: '{"expires_at":"2026-04-04"}'
        form: {}
        headers:
            Accept:
                - application/json
            Content-Type:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/personal_access_tokens/13740081/rotate
        method: POST
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"id":13740089,"name":"TestWithGitlabUser_RotateToken","revoked":false,"created_at":"2025-04-04T20:46:09.369Z","description":"","scopes":["api","self_rotate"],"user_id":32923,"last_used_at":null,"active":true,"expires_at":"2026-04-04","token":"glpat-5hsG26sKf_xTeLcZbjmT"}'
        headers:
            Cache-Control:
                - max-age=0, private, must-revalidate
            Cf-Cache-Status:
                - DYNAMIC
            Cf-Ray:
                - 92b3a74bb95c2d00-AMS
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Fri, 04 Apr 2025 20:46:09 GMT
            Etag:
                - W/"ac937c638d3b09127385bdbe8f9ba720"
            Gitlab-Lb:
                - haproxy-main-21-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-d
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=BcneyMdtX%2FCZWoHVYbc%2B0vwMMbbPeTeLkW9DS8gjS4ieQA2XNjJ2wNwy6lO%2BqHsKx1TN%2F8P%2B5bjPGNkxq7OOEUqCAVGVbRQYUpHknIF4EXMNBe6WqkIxvYUrw4s%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=ZQVtT.36zU1vatV4kDEZ6Oi1hrWa5s090rpg5zFmz9Q-1743799569458-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin, Accept-Encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Gitlab-Meta:
                - '{"correlation_id":"eb9946134f5d12f70e6a4c3798779930","version":"1"}'
            X-Request-Id:
                - eb9946134f5d12f70e6a4c3798779930
            X-Runtime:
                - "0.097840"
        status: 200 OK
        code: 200
        duration: 344.341958ms
    - id: 5
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/personal_access_tokens/self
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 106
        uncompressed: false
        body: '{"error":"invalid_token","error_description":"Token was revoked. You have to re-authorize from the user."}'
        headers:
            Cache-Control:
                - no-cache
            Cf-Cache-Status:
                - MISS
            Cf-Ray:
                - 92b3a7501d542d00-AMS
            Content-Length:
                - "106"
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Fri, 04 Apr 2025 20:46:10 GMT
            Gitlab-Lb:
                - haproxy-main-17-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-c
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=lPqslOWrtzLMh3n3o7Wf0Nol1vjVKcZ8bQfEqn4jQV0wzEPxKGQs2h1HyvdMn31Qw8VAMSSLWPY4K2o7Mtc0MFtuTN6f3PMyTGlHyCw3dAnxNET32H%2FwFTotaTs%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=FpwRFJsnI8u0r6uipwA6oLo9DLl28h3HDw7qlSPrunk-1743799570273-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin, Accept-Encoding
            Www-Authenticate:
                - Bearer realm="Protected by OAuth 2.0", error="invalid_token", error_description="Token was revoked. You have to re-authorize from the user."
            X-Content-Type-Options:
                - nosniff
            X-Gitlab-Meta:
                - '{"correlation_id":"4004161bc594ad3c039679e2a8c8633f","version":"1"}'
            X-Request-Id:
                - 4004161bc594ad3c039679e2a8c8633f
            X-Runtime:
                - "0.030754"
        status: 401 Unauthorized
        code: 401
        duration: 356.882292ms
    - id: 6
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: gitlab.com
        remote_addr: ""
        request_uri: ""
        body: ""
        form: {}
        headers:
            Accept:
                - application/json
            Private-Token:
                - REPLACED-TOKEN
            User-Agent:
                - go-gitlab
        url: https://gitlab.com/api/v4/personal_access_tokens/self
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: -1
        uncompressed: true
        body: '{"id":13740089,"name":"TestWithGitlabUser_RotateToken","revoked":false,"created_at":"2025-04-04T20:46:09.369Z","description":"","scopes":["api","self_rotate"],"user_id":32923,"last_used_at":"2025-04-04T20:46:10.746Z","active":true,"expires_at":"2026-04-04"}'
        headers:
            Cache-Control:
                - max-age=0, private, must-revalidate
            Cf-Cache-Status:
                - MISS
            Cf-Ray:
                - 92b3a75499332d00-AMS
            Content-Security-Policy:
                - default-src 'none'
            Content-Type:
                - application/json
            Date:
                - Fri, 04 Apr 2025 20:46:10 GMT
            Etag:
                - W/"f257dd98d0ad4380e6a901eed6d385aa"
            Gitlab-Lb:
                - haproxy-main-43-lb-gprd
            Gitlab-Sv:
                - api-gke-us-east1-b
            Nel:
                - '{"success_fraction":0.01,"report_to":"cf-nel","max_age":604800}'
            Referrer-Policy:
                - strict-origin-when-cross-origin
            Report-To:
                - '{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=ODCGQXWw7JqkN7y2kWXB%2BvFhMPWCmDfRp7e5cIAMXOIx9Rfy%2FvMIOCfJzwwO%2BI3tbZNoSCEOrWisyFmKVYwplQWH%2BR1UzsHN74%2FkUJl%2FfNweNlNgDavHvLrJS6M%3D"}],"group":"cf-nel","max_age":604800}'
            Server:
                - cloudflare
            Set-Cookie:
                - _cfuvid=bp2KtRVnU8Y1.oIoBk_DnvZGbhzEln1U4zXv6T.3JT8-1743799570862-0.0.1.1-604800000; path=/; domain=.gitlab.com; HttpOnly; Secure; SameSite=None
            Strict-Transport-Security:
                - max-age=31536000
            Vary:
                - Origin, Accept-Encoding
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - SAMEORIGIN
            X-Gitlab-Meta:
                - '{"correlation_id":"0390bfeec3181243d4b56550300bb3a5","version":"1"}'
            X-Request-Id:
                - 0390bfeec3181243d4b56550300bb3a5
            X-Runtime:
                - "0.069989"
        status: 200 OK
        code: 200
        duration: 225.462834ms
